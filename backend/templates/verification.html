{% extends 'base.html' %}
{% block content %}
<div class="payment-content" >
    <h1>Waiting for verification...</h1>
    </div>
{% endblock content %}
{% block footer %}
{% endblock footer %}

{% block scripts %}
<script>
fetch("/arduino/{{ order_total }}")
    .then(response => response.json())
    .then(idData => {
        if (idData[valid]) {
            // Generate and display the order ID
            const orderID = generateOrderID();
            document.getElementById("order-id").textContent = orderID;

            // Show a message to confirm the order
            alert(`Order confirmed for ${user.name}!\nYour Order ID: ${orderID}`);

            // Redirect to id verification page
            window.location.href = "payment";
        } else {
            alert(idData[error]);
            window.location.href = "/order";
        }
    })
    .catch(error => {
        console.error("Error fetching user data:", error);
    });
</script>
{% endblock scripts %}
